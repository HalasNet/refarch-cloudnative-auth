<server description="Sample Liberty server">

  <featureManager>
      <feature>microprofile-1.2</feature>
      <feature>openidConnectServer-1.0</feature>  
  </featureManager>

  <httpEndpoint httpPort="${default.http.port}" httpsPort="${default.https.port}"
      id="defaultHttpEndpoint" host="*" />

  <!-- Automatically expand WAR files and EAR files -->
  <applicationManager autoExpand="true"/>

  <webApplication name="Auth" location="${app.location}"/>
  
  <basicRegistry id="basic" realm=" OpBasicRealm ">
        <user name="user1" password="security" />
        <user name="user2" password="security" />
  </basicRegistry>
  
  <keyStore id="defaultKeyStore" password="keypass" />
  
  <openidConnectProvider id="OP" oauthProviderRef="Oauth" >
  </openidConnectProvider>
  <oauthProvider id="Oauth"  >
    <localStore>
    <client name="rp" secret="secret"
                displayname="rp"
                grant_types="password"
                redirect="https://localhost:8443/RelyingPart/rest/health"
                scope="openid profile scope1 email phone address"
                preAuthorizedScope="openid"
                enabled="true"/>
    </localStore>
  </oauthProvider>
   <oauth-roles>
    <authenticated>
        <special-subject type="ALL_AUTHENTICATED_USERS" />  
    </authenticated>
  </oauth-roles>
  
</server>
